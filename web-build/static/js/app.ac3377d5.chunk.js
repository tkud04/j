(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{194:function(e,t,n){"use strict";n.d(t,"a",(function(){return fe}));var r=n(9),o=n.n(r),a=n(1),c=n.n(a),i=n(121),s=n(0),l=n(5),u=n(4),f=n(3),d=n(22),b=n(279),p=n(281),j=n(53),h=n(195),g=n(32),O=Object(g.j)();var x=n(119),m=n(74),y=n(178),w=n.n(y),v=n(285),k=n(286),S=n(122),T=n(60),P=(n(283),n(284)),C=n(282),_=n(276),B=n(277),I=n(16);function L(e){Object(x.b)(e)}function R(e,t){return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("web"!=l.a.OS){n.next=4;break}localStorage.setItem(e,t),n.next=6;break;case 4:return n.next=6,c.a.awrap(S.c(e,t));case 6:case"end":return n.stop()}}),null,null,null,Promise)}function D(e){var t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=null,"web"!=l.a.OS){n.next=5;break}t=localStorage.getItem(e),n.next=8;break;case 5:return n.next=7,c.a.awrap(S.b(e));case 7:t=n.sent;case 8:return n.abrupt("return",t);case 9:case"end":return n.stop()}}),null,null,null,Promise)}function z(e){return Object.entries(e).map((function(e){var t=o()(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&")}var N=Object(s.createContext)({}),A=N.Provider,E=(N.Consumer,N),F=n(280),M=n(50),Y=n(23),W=n(8);var V=u.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"flex-start",paddingLeft:5},validation:{fontSize:16,fontWeight:"bold",color:"red"},loginLogo:{marginTop:30,marginLeft:Y.a.get("window").width/6},loginText:{marginTop:30,fontSize:16,fontWeight:"bold"},loginButton:{alignItems:"center",marginTop:50,padding:20,color:"#fff",width:Y.a.get("window").width-20},loginButtonText:{}}),X=function(){var e,t,n=Object(s.useContext)(E),r=Object(s.useState)("#77f"),a=o()(r,2),i=a[0],u=a[1],b=Object(s.useState)("#fff"),p=o()(b,2),h=p[0],g=p[1],O=Object(s.useState)(!0),x=o()(O,2),m=(x[0],x[1],Object(s.useState)(!1)),y=o()(m,2),w=y[0],v=y[1],k=Object(s.useState)(null),S=o()(k,2),P=(S[0],S[1]),C=function(e){n.setAtk(e.atk),n.setRtk(e.rtk),n.setU(e.u),n.setLoggedIn(!0)},_="https://pensionjar-development.eu.auth0.com",B=l.a.select({web:!1,default:!0}),I=T.e({useProxy:B}),D=null,N=null,A=null;Object(s.useEffect)((function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=6;break}return v(!0),e.next=4,c.a.awrap(T.d(_));case 4:D=e.sent,P(D);case 6:case"end":return e.stop()}}),null,null,null,Promise)}));var F={redirectUri:I,clientId:"LFi1MZQxXQW4Y1vMhEOXN7Sy11naYTcF",responseType:T.b.Code,scopes:["openid","profile","offline_access"],extraParams:{audience:_+"/api/v2/"},prompt:T.a.Login},Y=T.f(F,{authorizationEndpoint:"https://pensionjar-development.eu.auth0.com/authorize"}),X=o()(Y,3);return e=X[0],t=X[1],A=X[2],Object(s.useEffect)((function(){var n,r,o;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=9;break}if(n=t.params,!t.error){a.next=5;break}return L({type:"danger",message:t.params.error_description||"Something went wrong.."}),a.abrupt("return");case 5:if(!t.type||"dismiss"!=t.type){a.next=8;break}return L({type:"danger",message:"Your login attempt was dismissed."}),a.abrupt("return");case 8:n.code&&(N={grant_type:"authorization_code",client_id:"LFi1MZQxXQW4Y1vMhEOXN7Sy11naYTcF",redirect_uri:I,code:n.code,code_verifier:e.codeVerifier},r=_+"/oauth/token","",o=new Request(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:z(N)}),fetch(o).then((function(e){return 200===e.status?e.json():{status:"error",message:"Technical error"}})).catch((function(e){console.log("Failed first to fetch token: ",e)})).then((function(e){if(console.log("dt: ",e),e.hasOwnProperty("status")&&"error"==e.status)L({type:"danger",message:"There was an issue with verifying your identity, please try again."});else try{setTimeout((function(){var t,n,o,a,i;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return N.refresh_token=e.refresh_token,N.grant_type="refresh_token",t=new Request(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:z(N)}),s.next=5,c.a.awrap(fetch(t));case 5:return n=s.sent,s.next=8,c.a.awrap(n.json());case 8:return o=s.sent,console.log("dt3: ",o),_+"/userinfo",s.next=13,c.a.awrap(fetch("https://pensionjar-development.eu.auth0.com/userinfo",{headers:{Authorization:"Bearer "+o.access_token}}));case 13:return a=s.sent,s.next=16,c.a.awrap(a.json());case 16:i=s.sent,R("pa_atk",o.access_token),R("pa_rtk",e.refresh_token),R("pa_u",JSON.stringify(i)),C({u:i,atk:o.access_token,rtk:e.refresh_token});case 21:case"end":return s.stop()}}),null,null,null,Promise)}),5e3)}catch(t){console.log("error in try block: ",t)}})).catch((function(e){console.log("Failed to fetch tokens: ",e)})));case 9:case"end":return a.stop()}}),null,null,null,Promise)}),[t]),Object(W.jsxs)(f.a,{style:V.container,children:[Object(W.jsx)(f.a,{style:V.loginLogo,children:Object(W.jsx)(j.default,{name:"login",color:"#77f",size:200})}),Object(W.jsx)(f.a,{children:Object(W.jsx)(d.a,{style:V.loginText,children:"You need to login to continue to Jarvis. Click the button below when you're ready!"})}),Object(W.jsx)(M.a,{onPress:function(){console.log("moving.."),u("#fff"),g("#77f"),setTimeout((function(){u("#77f"),g("#fff")}),700),A({useProxy:B})},children:Object(W.jsx)(f.a,{style:[V.loginButton,{backgroundColor:i}],children:Object(W.jsx)(d.a,{style:[V.loginButtonText,{color:h}],children:"Login with Auth0"})})})]})},J=n(40),Q=function(e){return Object(W.jsx)(M.a,{onPress:e.action,style:function(t){var n=t.pressed;return[{backgroundColor:n?"rgb(210, 230, 255)":e.bgcolor,color:n?"#000":"#fff"},U.iconButton]},children:Object(W.jsx)(j.default,{name:e.name,size:26,style:[{padding:15},e.style]})})},U=u.a.create({container:{width:Y.a.get("window").width,flexDirection:"row",justifyContent:"space-between",borderBottomWidth:.8,marginLeft:-15},hc:{height:20,overflow:"hidden",padding:20},newButton:{color:"#fff"},profileButton:{color:"#fff"},logoView:{},logoText:{alignItems:"flex-end"}}),q=function(e){return Object(W.jsxs)(f.a,{style:U.container,children:[Object(W.jsx)(Q,{name:"plus",bgcolor:"#694fad",action:function(){return e.l,void console.log("new button clicked")},style:U.newButton}),Object(W.jsx)(f.a,{style:U.logoView,children:Object(W.jsx)(J.a,{source:n(254),style:{width:60,height:60}})}),Object(W.jsx)(Q,{name:"account",bgcolor:"#694fad",action:function(){return e.l,void console.log("profile button clicked")},style:U.profileButton})]})},Z=Object(F.a)();var H=function(){return Object(W.jsx)(Z.Navigator,{initialRouteName:"Login",screenOptions:{},children:Object(W.jsx)(Z.Screen,{name:"Login",component:X,options:{title:"Welcome to Jarvis!"}})})},G=n(7),K=n.n(G);var $=u.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"flex-start",marginTop:30,marginLeft:10},titleBar:{width:100,marginTop:40,paddingLeft:80,flexDirection:"row"},itemsLayout:{flexDirection:"row",flex:1},column:{width:50,alignItems:"center"},formGroup:{marginTop:30},loginButton:{alignItems:"center",marginTop:30}}),ee=function(e){return e.navigation,Object(W.jsxs)(f.a,{style:$.container,children:[Object(W.jsx)(d.a,{children:"Welcome to your profile!"}),Object(W.jsx)(d.a,{children:"Here is a bit of your information:"}),Object(W.jsx)(d.a,{children:"Test"})]})};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ne=Object(F.a)();var re=function(){return Object(W.jsx)(ne.Navigator,{initialRouteName:"Home",screenOptions:{headerTitle:function(e){return Object(W.jsx)(q,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){K()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},children:Object(W.jsx)(ne.Screen,{name:"Dashboard",component:ee})})},oe=n(106);var ae=u.a.create({container:{backgroundColor:"#fff",width:"100%",height:"100%",flex:1},item:{flex:1,padding:3,flexDirection:"row",backgroundColor:"#fff",justifyContent:"space-between"},caption:{fontSize:18,fontWeight:"bold"},centeredView:{flex:1,justifyContent:"center",alignItems:"center",marginTop:22},modalText:{marginBottom:15,textAlign:"center"},modalView:{margin:20,backgroundColor:"white",borderRadius:20,padding:35,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},button:{alignItems:"center",marginTop:50,padding:20,color:"#fff",width:Y.a.get("window").width-20}}),ce=function(){Object(s.useContext)(E);var e=Object(s.useState)(!1),t=o()(e,2),n=t[0],r=t[1],a=Object(s.useState)("#fff"),i=o()(a,2),l=i[0],u=i[1],b=Object(s.useState)("orange"),p=o()(b,2),j=p[0],h=p[1],g=Object(s.useState)("#fff"),O=o()(g,2),x=(O[0],O[1],Object(s.useState)("green")),m=o()(x,2),y=(m[0],m[1],[{key:"more-3",caption:"View information about the app.",btn:"About",play:function(){console.log("moving..")}},{key:"more-4",caption:"Sign out of your account",btn:"Sign out",play:function(){r(!0)}}]);return Object(W.jsxs)(f.a,{style:ae.container,children:[Object(W.jsx)(d.a,{style:ae.caption,children:"More options"}),y.map((function(e){return Object(W.jsxs)(f.a,{style:ae.item,children:[Object(W.jsx)(d.a,{style:{marginRight:1},children:e.caption}),Object(W.jsx)(M.a,{onPress:function(){console.log("moving.."),e.play()},style:{width:80,height:40},children:Object(W.jsx)(f.a,{style:[ae.loginButton,{backgroundColor:"#694fad"}],children:Object(W.jsx)(d.a,{style:[ae.loginButtonText,{color:"#fff"}],children:e.btn})})})]})})),Object(W.jsx)(oe.a,{animationType:"slide",transparent:!0,visible:n,onRequestClose:function(){},children:Object(W.jsx)(f.a,{style:ae.centeredView,children:Object(W.jsxs)(f.a,{style:ae.modalView,children:[Object(W.jsx)(d.a,{style:ae.modalText,children:"Are you sure?"}),Object(W.jsxs)(f.a,{style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(W.jsx)(M.a,{onPress:function(){console.log("moving.."),h("#fff"),u("orange"),setTimeout((function(){h("orange"),u("#fff")}),700),c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{T.c()}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),null,null,null,Promise)},style:{width:80,height:40},children:Object(W.jsx)(f.a,{style:[ae.button,{backgroundColor:j}],children:Object(W.jsx)(d.a,{style:{color:l},children:"Yes"})})}),Object(W.jsx)(M.a,{onPress:function(){console.log("moving.."),h("#fff"),u("green"),setTimeout((function(){h("green"),u("#fff")}),700),r(!1)},style:{width:80,height:40},children:Object(W.jsx)(f.a,{style:[ae.button,{backgroundColor:j}],children:Object(W.jsx)(d.a,{style:{color:l},children:"No"})})})]})]})})})]})};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var se=Object(F.a)();var le=function(){return Object(W.jsx)(se.Navigator,{initialRouteName:"More",screenOptions:{headerTitle:function(e){return Object(W.jsx)(q,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){K()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},children:Object(W.jsx)(se.Screen,{name:"More",component:ce})})},ue=Object(p.a)();function fe(){var e=Object(s.useState)(!1),t=o()(e,2),n=(t[0],t[1]),r=Object(s.useState)(!1),a=o()(r,2),u=a[0],p=a[1],g=Object(s.useState)(!1),m=o()(g,2),y=m[0],v=m[1],S=Object(s.useState)(null),T=o()(S,2),L=T[0],N=T[1],E=Object(s.useState)(null),F=o()(E,2),M=(F[0],F[1],Object(s.useState)(null)),Y=o()(M,2),V=Y[0],X=Y[1],J=Object(s.useState)(null),Q=o()(J,2),U=Q[0],q=Q[1],Z=Object(s.useState)(""),G=o()(Z,2),K=G[0],$=G[1],ee=Object(s.useState)(!1),te=o()(ee,2),ne=te[0],oe=te[1],ae=Object(s.useState)(!1),ce=o()(ae,2),ie=(ce[0],ce[1]),se=Object(s.useRef)(),fe=Object(s.useRef)(),be=null,pe=h.a.addEventListener((function(e){(be=e.isInternetReachable)!=ne&&(oe(be),be||("Your device is offline","danger"))})),je={loggedIn:y,setLoggedIn:v,etk:K,setEtk:$,atk:V,setAtk:X,rtk:U,setRtk:q,u:L,setU:N,online:ne,setOnline:oe};Object(s.useEffect)((function(){!function(){var e,t,r,o,a,i;c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c.a.awrap(D("pa_rtk"));case 3:return e=s.sent,s.next=6,c.a.awrap(D("pa_first_view"));case 6:return t=s.sent,r=null,null,t&&"false"==t&&p(!0),s.prev=9,s.next=12,c.a.awrap(D("pa_u"));case 12:if(!(r=s.sent)){s.next=30;break}if(null==e||null==r){s.next=28;break}return"https://pensionjar-development.eu.auth0.com/oauth/token",o=new Request("https://pensionjar-development.eu.auth0.com/oauth/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:z({grant_type:"refresh_token",client_id:"LFi1MZQxXQW4Y1vMhEOXN7Sy11naYTcF",refresh_token:e})}),s.next=20,c.a.awrap(fetch(o));case 20:return a=s.sent,s.next=23,c.a.awrap(a.json());case 23:R("pa_atk",(i=s.sent).access_token),X(i.access_token),N(JSON.parse(r)),v(!0);case 28:s.next=31;break;case 30:console.log("No credentials stored");case 31:s.next=36;break;case 33:s.prev=33,s.t0=s.catch(9),console.log("SecureStore couldn't be accessed!",s.t0);case 36:return s.next=38,c.a.awrap(new Promise((function(e){return setTimeout(e,2e3)})));case 38:try{pe()}catch(l){console.warn(l)}s.next=44;break;case 41:s.prev=41,s.t1=s.catch(0),console.warn(s.t1);case 44:return s.prev=44,n(!0),s.finish(44);case 47:case"end":return s.stop()}}),null,null,[[0,41,44,47],[9,33]],Promise)}()}),[]),Object(s.useEffect)((function(){if(ne)return function(){var e,t,n,r,o,a;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e="",!I.a.isDevice){i.next=16;break}return i.next=4,c.a.awrap(P.a());case 4:if(t=i.sent,n=t.status,r=n,"granted"===n){i.next=13;break}return i.next=10,c.a.awrap(P.b());case 10:o=i.sent,a=o.status,r=a;case 13:"granted"==r&&C.a().then((function(t){R("pa_etk",e=t.data)})).catch((function(e){})),i.next=16;break;case 16:return"android"===l.a.OS&&_.a("default",{name:"default",importance:B.a.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF231F7C"}),i.abrupt("return",e);case 18:case"end":return i.stop()}}),null,null,null,Promise)}().then((function(e){})),se.current=k.a((function(e){ie(e)})),fe.current=k.b((function(e){console.log("response: ",e)})),function(){k.c(se.current),k.c(fe.current)}}),[ne]);var he=y?"AppStack":"AuthStack";return u?Object(W.jsxs)(A,{value:je,children:[Object(W.jsx)(b.a,{ref:O,children:Object(W.jsx)(ue.Navigator,{initialRouteName:he,activeColor:"#f0edf6",inactiveColor:"#3e2465",barStyle:{backgroundColor:"#694fad"},children:y?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ue.Screen,{name:"AppStack",component:re,options:{tabBarLabel:"Dashboard",tabBarIcon:function(e){var t=e.color;return Object(W.jsx)(j.default,{name:"view-dashboard",color:t,size:26})}}}),Object(W.jsx)(ue.Screen,{name:"MoreStack",component:le,options:{tabBarLabel:"More",tabBarIcon:function(e){var t=e.color;return Object(W.jsx)(j.default,{name:"dots-horizontal-circle",color:t,size:26})}}})]}):Object(W.jsx)(ue.Screen,{name:"AuthStack",component:H,options:{tabBarLabel:"Login",tabBarIcon:function(e){var t=e.color;return Object(W.jsx)(j.default,{name:"account",color:t,size:26})}}})})}),Object(W.jsx)(i.a,{style:"auto"}),Object(W.jsx)(x.a,{position:"bottom"})]}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)(f.a,{style:{flex:1},children:[Object(W.jsx)(i.a,{translucent:!0,backgroundColor:"transparent"}),Object(W.jsx)(w.a,{keyExtractor:function(e){return e.title},renderItem:function(e){var t=e.item,n="web"==l.a.OS?{height:"100%"}:null;return Object(W.jsxs)(f.a,{style:[de.slide,{backgroundColor:t.bg},n],children:[Object(W.jsx)(j.default,{name:t.icon,color:"#fff",size:200}),Object(W.jsx)(d.a,{style:de.title,children:t.title}),Object(W.jsx)(d.a,{style:de.copy,children:t.copy})]})},bottomButton:!0,showSkipButton:!0,showPrevButton:!0,data:[{title:"Title 1",icon:"cash",copy:"This is the copy for the first slide",bg:"#59b2ab"},{title:"Title 2",icon:"cash-register",copy:"This is the copy for the second slide",bg:"#febe29"},{title:"Title 3",icon:"cash-multiple",copy:"This is the copy for the third slide",bg:"#22bcb5"}],onDone:function(){p(!0),R("pa_first_view","false")}})]}),Object(W.jsx)(i.a,{style:"auto"})]})}v.a({handleNotification:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{shouldShowAlert:!0,shouldPlaySound:!1,shouldSetBadge:!1});case 1:case"end":return e.stop()}}),null,null,null,Promise)}}),m.b();var de=u.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},slide:{flex:1,alignItems:"center",justifyContent:"center",paddingBottom:96},title:{fontSize:22,color:"white",textAlign:"center",marginTop:10},copy:{fontSize:18,color:"white",textAlign:"center",marginTop:10}})},199:function(e,t,n){e.exports=n(268)},254:function(e,t,n){e.exports=n.p+"static/media/header.7f96e52d.jpeg"}},[[199,1,2]]]);
//# sourceMappingURL=app.ac3377d5.chunk.js.map